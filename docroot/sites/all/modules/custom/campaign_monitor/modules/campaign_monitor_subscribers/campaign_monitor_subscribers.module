<?php

/**
 * Implements hook_permission().
 */
function campaign_monitor_subscribers_permission() {
  return array(
    'create subscriber' => array(
      'title' => t('Create subscriber'),
      'description' => t('Access to create Campaign Monitor subscribers'),
    ),
    'view own subscribers' => array(
      'title' => t('View own subscribers'),
      'description' => t('Access to view own Campaign Monitor subscribers'),
    ),
    'edit own subscribers' => array(
      'title' => t('Edit own subscribers'),
      'description' => t('Access to edit own Campaign Monitor subscribers'),
    ),
    'delete own subscribers' => array(
      'title' => t('Delete own subscribers'),
      'description' => t('Access to delete own Campaign Monitor subscribers'),
    ),
  );
}

/**
 * Implements hook_entity_info().
 * Inform the base system and the Field API about one or more entity types.
 */
function campaign_monitor_subscribers_entity_info() {
  $info = array();
  $info['cm_subscriber'] = array(
    'label' => t('Subscriber'),
    'plural label' => t('Subscribers'),
    'base table' => 'campaign_monitor_subscribers',
    'entity keys' => array(
      'id' => 'id',
      'label' => 'email',
    ),
    'static cache' => TRUE,
    'entity class' => 'CmSubscriberEntity',
    'controller class' => 'CmSubscriberEntityController',
    'views controller class' => 'EntityDefaultViewsController',
    'module' => 'campaign_monitor_subscribers',
    'view modes' => array(
      'full' => array(
        'label' => t('Full content'),
        'custom settings' => TRUE,
      ),
    ),
    'bundles' => array(
      'cm_subscriber' => array(
        'label' => t('Campaign Monitor Subscriber'),
        'admin' => array(
          'path' => 'admin/campaign-monitor/subscribers',
        ),
      ),
    ),
    'uri callback' => 'entity_class_uri',
  );
  return $info;
}


